(function(a){doc=a(document);a.fn.updater=function(g,f){var e=a.extend(true,{},b,g),d=setInterval(c.init,e.interval);doc.data("updater",{options:e,callback:f,interval:d,isActive:true,lastRequest:{result:"",status:"",text:""}});c.init();doc.bind("stop.updater",c.stop);doc.bind("start.updater",c.reboot);return};var c={init:function(){if(c.obj().isActive){var d=c.obj().options,e=c.obj().callback;c.pull(d,e)}return},setStatus:function(e,d){c.obj().lastRequest.result=d;c.obj().lastRequest.status=e.status;c.obj().lastRequest.text=e.statusText;return},pull:function(d,f){var e=(d.method==="post")?"POST":"GET";a.ajax({url:d.url,data:d.data,type:e,dataType:d.response,success:function(i,g,h){c.setStatus(h,g);f(i,g,h)},error:function(h,g){c.setStatus(h,g)}});return},stop:function(){if(c.obj().isActive){clearInterval(c.obj().interval)}c.obj().isActive=false;return},reboot:function(){if(!c.obj().isActive){var e=c.obj().options,d=c.obj().callback;a.updater(e,d)}c.obj().isActive=true;return},obj:function(){return doc.data("updater")},debug:function(){if(console){console.group();console.log("Url: ",c.obj().options.url);console.log("Interval: ",c.obj().options.interval);console.log("Method: ",c.obj().options.method);console.log("Data: ",c.obj().options.data);console.log("Callback: ",c.obj().callback);console.log("Last Request: ",c.obj().lastRequest.result,c.obj().lastRequest.status,c.obj().lastRequest.text);console.log("Requests Continues: ",c.obj().isActive);console.groupEnd()}return}};var b={url:undefined,data:undefined,method:"post",response:"json",interval:3000,};a.updater=a.fn.updater;a.updater.stop=c.stop;a.updater.start=c.reboot;a.updater.debug=c.debug})(jQuery);